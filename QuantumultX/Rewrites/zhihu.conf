# Name   zhihu
# Author @blackmatrix7, @RuCu6
# Update 2023-04-29 01:15
# 屏蔽过多关键词会导致首页无内容显示！
# https://github.com/blackmatrix7/ios_rule_script/blob/master/script/zheye/zheye.snippet
# BoxJS知乎订阅 https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/boxjs.json

hostname = 118.89.204.198, 103.41.167.237, 103.41.167.236, 103.41.167.234, 103.41.167.235, 103.41.167.226, 2402:4e00:1200:ed00:0:9089:6dac:96b6, zhuanlan.zhihu.com, *cloud*.zhihu.com, api.zhihu.com, www.zhihu.com

^https?:\/\/(118\.89\.204\.198|103\.41\.167\.237) url reject-dict
^https?:\/\/2402:4e00:1200:ed00:0:9089:6dac:96b6 url reject-200

# 屏蔽下发的配置,如皮肤等 platforms\/ios\/config
# 会员 tab 里面 顶部横幅 bazaar\/vip_tab\/header
# 搜索框左侧活动 root\/window$ @RuCu6
# 暂不清楚作用 ad-style-service\/request
# 我的页面_创作里面各种卡片 api\/v\d\/creators|sku
# 会员页_会员购底下商品 topseller\/shop\/tab
# 设置通知? settings\/new\/notification
# 活动信息推送? message-push\/event
# 活动推荐窗? event-center\/recommend\/window
# 热榜直播 drama\/hot-drama-list$
^https?:\/\/(api|www)\.zhihu\.com\/(ab\/api\/v\d\/products\/zhihu\/platforms\/ios\/config|bazaar\/vip_tab\/header|root\/window$|ad-style-service\/request|api\/v\d\/creators|sku|topseller\/shop\/tab|settings\/new\/notification|market\/popovers|message-push\/event|event-center\/recommend\/window|drama\/hot-drama-list$) url reject-dict
^https?:\/\/api\.zhihu\.com\/drama\/hot-drama-list$ url reject-dict

# ^https:\/\/api\.zhihu\.com\/(moments\/lastread|drama\/hot-drama-list)$ url reject-dict

# 我的页面_开通会员卡片 unlimited\/go\/my_card
^https?:\/\/api\.zhihu\.com\/unlimited\/go\/my_card$ url reject-200

# 开屏广告 api～～commercial_api\/(launch|real_time_launch)_v\d
# 品牌提问广告 api～～brand\/question\/\d+/card
# 回答下的 卡片广告 www～～v\d+\/brand\/question/\d+/card|v\d\/answers\/\d+\/recommendations
# 回答下的 相关搜索 www～～v\d\/search/related_queries\/(answer|article)
^https?:\/\/(api|www)\.zhihu\.com\/(commercial_api\/(launch|real_time_launch)_v\d|brand\/question\/\d+/card|api\/(v\d+\/brand\/question/\d+/card|v\d\/answers\/\d+\/recommendations|v\d+\/search/related_queries\/(answer|article))) url reject-dict

# 底栏_关注_角标 moments\/tab_v\d
# 消息_通知角标 notifications\/v\d\/count
# 拦截应用内弹窗 me\/guides
# 推荐页_顶部广告 api\/v\d\/ecom_data\/config
# 推荐页_顶部横幅 commercial_api\/banners_v\d\/app_topstory_banner
# 底栏+号广告 content-distribution-core\/bubble\/common\/settings
^https?:\/\/api\.zhihu\.com\/(moments\/tab_v\d|notifications\/v\d\/count|me\/guides|api\/v\d\/ecom_data\/config|commercial_api\/banners_v\d\/app_topstory_banner|content-distribution-core\/bubble\/common\/settings) url reject-dict

# 获取用户信息，隔离用户数据，开启本地会员等 people\/
# 用户信息_修改用户盐值 user-credit\/basis
# 关注页_内容优化及屏蔽转发黑名单用户想法moments_v\d
# 推荐页_移除黑名单用户发布的文章，去广告，及自定义一些屏蔽项目 topstory\/recommend
# 黑名单页_同步黑名单数据 settings\/blocked_users
# 回答页_屏蔽下翻出现的黑名单用户的回答 next
# 热榜页_去广告 topstory\/hot-lists?(\?|\/)
# 搜索页_去预置广告 search\/preset_words
^https?:\/\/api\.zhihu\.com\/(people\/|user-credit\/basis|moments_v\d|topstory\/recommend|settings\/blocked_users|next|topstory\/hot-lists?(\?|\/)|search\/preset_words) url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# 当前阅读？feed\/render\/revisit\/current_reading
# 推荐页_左上角图标 feed\/render\/revisit\/tag_config
# 关注页_最常访问 moments\/recent
//^https?:\/\/api\.zhihu\.com\/(feed\/render\/revisit\/(current_reading|tag_config)|moments\/recent) url reject-dict

# 问题回答列表_去广告，移除黑名单用户回答 (v\d\/)?questions\/\d+
# 回答信息流_去广告，移除黑名单用户回答 next-data
# 消息页_折叠官方消息，屏蔽营销消息 notifications\/v\d\/(message|timeline\/entry\/system_message)
^https?:\/\/api\.zhihu\.com\/((v\d\/)?questions\/\d+|next-data|notifications\/v\d\/(message|timeline\/entry\/system_message)) url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# 评论页及子页面_去除黑名单用户发表的评论
^https?:\/\/api\.zhihu\.com\/(comment_v\d\/)?(answers|comments?|articles|pins)\/\d+\/(root_|child_)?comments? url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# 回答页_内容优化，付费，营销，推广内容文首提醒
^https?:\/\/www\.zhihu\.com\/appview\/v\d\/answer\/.*(entry=(?!(preload-topstory|preload-search|preload-subscription)))? url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# 文章页_去底部广告 articles\/\d+\/recommendation
# 回答页_底部评论摘要，移除黑名单用户发表的评论 comment_v5\/answers\/\d+\/abstract_comment
^https?:\/\/www\.zhihu\.com\/api\/v\d\/(articles\/\d+\/recommendation|comment_v5\/answers\/\d+\/abstract_comment) url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# 优化软件配置_优化下发的配置文件来实现某些效果
^https?:\/\/m-cloud\.zhihu\.com\/api\/cloud\/config\/all url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js
^https?:\/\/appcloud2\.zhihu\.com\/v\d+\/config url script-analyze-echo-response https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# 解锁本地关键词屏蔽功能，需要开启本地 vip
^https?:\/\/api\.zhihu\.com\/feed-root\/block url script-analyze-echo-response https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_b.js

# https://github.com/RuCu6/QuanX/blob/main/Rewrites/Cube/zhihu.snippet
# 我的页面_下方各种卡片
^https?:\/\/www\.zhihu\.com\/appview\/v\d\/zhmore\?? url script-response-body https://raw.githubusercontent.com/ZY714IU/ZY/main/QuantumultX/Scripts/zhihu_a.js
# 网页版去广告
^https?:\/\/api\.zhihu\.com\/distribute\/rhea\/qa_ad_card\/h5\/recommendation url reject-dict
^https?:\/\/(www|zhuanlan)\.zhihu\.com\/(api\/v\d\/hot_recommendation|commercial_api\/banners_v\d\/mobile_banner|api\/v\d\/search\/top_search\/tabs\/hot\/items|api/v\d\/growth\/mobile_top_banner|api\/articles\/\d+\/recommendation|api\/v\d/(questions|anwsers)\/\d+/related-readings) url reject